-- Bootstrap lazy.nvim
local lazypath = vim.fn.stdpath("data") .. "/lazy/lazy.nvim"
if not vim.loop.fs_stat(lazypath) then
	vim.fn.system({
		"git",
		"clone",
		"--filter=blob:none",
		"https://github.com/folke/lazy.nvim.git",
		"--branch=stable",
		lazypath,
	})
end
vim.opt.rtp:prepend(lazypath)

-- Basic options
vim.g.mapleader = " "
vim.g.maplocalleader = " "

vim.opt.number = true -- Line numbers
vim.opt.relativenumber = true -- Relative line numbers
vim.opt.tabstop = 4 -- 4-space tabs
vim.opt.shiftwidth = 4
vim.opt.expandtab = true -- Spaces instead of tabs
vim.opt.smartindent = true
vim.opt.wrap = false -- No line wrap
vim.opt.termguicolors = true -- True color support
vim.opt.scrolloff = 8 -- Keep 8 lines visible when scrolling
vim.opt.signcolumn = "yes" -- Always show sign column

-- Setup plugins
require("lazy").setup({
	-- LazyVim (core framework)
	{
		"LazyVim/LazyVim",
		import = "lazyvim.plugins",
	},

	-- Colorscheme (change to your preference)
	-- Replace the catppuccin block with this:
	{
		"EdenEast/nightfox.nvim",
		priority = 1000,
		config = function()
			vim.cmd("colorscheme carbonfox")
		end,
	},
	-- File explorer
	{ import = "lazyvim.plugins.extras.editor.neo-tree" },

	-- Python support
	{ import = "lazyvim.plugins.extras.lang.python" },

	-- Fuzzy finder (fzf-lua - faster than telescope)
	{ import = "lazyvim.plugins.extras.editor.fzf" },

	-- Indent guides
	{
		"lukas-reineke/indent-blankline.nvim",
		main = "ibl",
		opts = {
			indent = { char = "â”‚" },
			scope = { enabled = true },
		},
	},

	-- Treesitter (better syntax highlighting + code awareness)
	{
		"nvim-treesitter/nvim-treesitter",
		build = ":TSUpdate",
		opts = {
			ensure_installed = {
				"python",
				"lua",
				"vim",
				"vimdoc",
				"json",
				"yaml",
				"markdown",
				"bash",
			},
			highlight = { enable = true },
			indent = { enable = true },
		},
	},

	-- Harpoon (quick file bookmarking)
	{
		"ThePrimeagen/harpoon",
		branch = "harpoon2",
		dependencies = { "nvim-lua/plenary.nvim" },
		config = function()
			local harpoon = require("harpoon")
			harpoon:setup()

			-- Keymaps
			vim.keymap.set("n", "<leader>ha", function()
				harpoon:list():add()
			end, { desc = "Harpoon add file" })
			vim.keymap.set("n", "<leader>hh", function()
				harpoon.ui:toggle_quick_menu(harpoon:list())
			end, { desc = "Harpoon menu" })
			vim.keymap.set("n", "<leader>h1", function()
				harpoon:list():select(1)
			end, { desc = "Harpoon file 1" })
			vim.keymap.set("n", "<leader>h2", function()
				harpoon:list():select(2)
			end, { desc = "Harpoon file 2" })
			vim.keymap.set("n", "<leader>h3", function()
				harpoon:list():select(3)
			end, { desc = "Harpoon file 3" })
			vim.keymap.set("n", "<leader>h4", function()
				harpoon:list():select(4)
			end, { desc = "Harpoon file 4" })
		end,
	},
}, {
	defaults = { lazy = false },
	checker = { enabled = true }, -- Auto-check for plugin updates
})
